# rxjs-drop-intermediate

[![CircleCI](https://circleci.com/gh/circleci/circleci-docs.svg?style=svg)](https://circleci.com/gh/circleci/circleci-docs)
[![codecov](https://codecov.io/gh/mlenger/rxjs-drop-intermediate/branch/main/graph/badge.svg?token=L4OO7KF4VJ)](https://codecov.io/gh/mlenger/rxjs-drop-intermediate)

RxJS operator to prevent congestion by dropping intermediate values. This can be useful when there are many events generated by user-input or a WebSocket connection where some intermediate events (e.g. updates from a certain channel) can be dropped.

Usage:

```typescript
import { dropIntermediate } from 'rxjs-drop-intermediate';

const droppingObservable = source.pipe(dropIntermediate());
```

Example taken from integration tests:

```typescript
const subject = new Subject<string>();
webSocket.onmessage = (m) => subject.next(m.data.toLocaleString());
const actual = await firstValueFrom(
  subject.pipe(
    dropIntermediate(),
    map((v) => parseInt(v)),
    tap(() => execSync('sleep 2')),
    take(2),
    toArray(),
    map((a) => a[1] - a[0])
  )
);

expect(actual).toBeGreaterThan(5);
```
